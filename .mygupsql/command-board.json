[
  {
    "name": "default",
    "attrs": {
      "content": "tab1 latest by id where name \u003d \u0027c1\u0027\n\ntables\ntables\n\ndrop table tab;\ndrop table tab1;\ndrop table tab2;\ndrop table tab3;\ndrop table tab4;\ndrop table tab5;\ndrop table tab6;\ndrop table tab7;\n\ncreate table tab(id symbol, name symbol, value double, ts timestamp);\ncreate table tab1(id symbol, name symbol, value double, ts timestamp) timestamp(ts) partition by DAY;\n\ncreate table tab3(id symbol, name symbol index, value double, ts timestamp) timestamp(ts) partition by DAY;\n\n\ninsert into tab0  values (\u0027d1\u0027, \u0027c1\u0027, 101.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c1\u0027, 101.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c1\u0027, 101.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c1\u0027, 101.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c2\u0027, 102.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c2\u0027, 102.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c2\u0027, 102.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c2\u0027, 102.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d1\u0027, \u0027c2\u0027, 102.5, \u00272021-10-05T15:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 201.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 201.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 201.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 201.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c2\u0027, 401.1, \u00272021-10-06T11:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 401.2, \u00272021-10-06T12:31:35.878Z\u0027);\ninsert into tab0 values (\u0027d2\u0027, \u0027c1\u0027, 111.7, \u00272021-10-06T15:31:35.878Z\u0027);\n\n\ninsert into tab1  values (\u0027d1\u0027, \u0027c1\u0027, 101.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c1\u0027, 101.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c1\u0027, 101.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c1\u0027, 101.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c2\u0027, 102.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c2\u0027, 102.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c2\u0027, 102.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c2\u0027, 102.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d1\u0027, \u0027c2\u0027, 102.5, \u00272021-10-05T15:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 201.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 201.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 201.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 201.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c2\u0027, 401.1, \u00272021-10-06T11:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 401.2, \u00272021-10-06T12:31:35.878Z\u0027);\ninsert into tab1 values (\u0027d2\u0027, \u0027c1\u0027, 111.7, \u00272021-10-06T15:31:35.878Z\u0027);\n\ninsert into tab3  values (\u0027d1\u0027, \u0027c1\u0027, 101.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c1\u0027, 101.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c1\u0027, 101.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c1\u0027, 101.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c2\u0027, 102.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c2\u0027, 102.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c2\u0027, 102.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c2\u0027, 102.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d1\u0027, \u0027c2\u0027, 102.5, \u00272021-10-05T15:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 201.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 201.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 201.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 201.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c2\u0027, 401.1, \u00272021-10-06T11:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 401.2, \u00272021-10-06T12:31:35.878Z\u0027);\ninsert into tab3 values (\u0027d2\u0027, \u0027c1\u0027, 111.7, \u00272021-10-06T15:31:35.878Z\u0027);"
    }
  },
  {
    "name": "latest by",
    "attrs": {
      "content": "tables\ntable_columns(\u0027coco\u0027)\ntable_columns(\u0027coconut\u0027)\nselect dump_memory_usage()\nselect current_database()\ndrop table dataframe\n\ndataframe\n\nCREATE TABLE lol AS(\n  SELECT\n    rnd_long256() long256\n  FROM\n    long_sequence(10)\n) timestamp(ts) partition by YEAR;\n\n\nCREATE TABLE dataframe AS(\n  SELECT\n    rnd_long(-9223372036854775808, 9223372036854775807, 1) long,\n    rnd_int(-2147483647, 2147483647, 1) int,\n    rnd_boolean() boolean,\n    rnd_date(to_date(\u00271978\u0027, \u0027yyyy\u0027),  to_date(\u00272021\u0027, \u0027yyyy\u0027), 1) date,\n    rnd_double(1) double,\n    rnd_timestamp(to_timestamp(\u00271978\u0027, \u0027yyyy\u0027), to_timestamp(\u00272021\u0027, \u0027yyyy\u0027), 0) ts\n  FROM\n    long_sequence(10)\n) timestamp(ts) partition by YEAR;\n\ntest_large_table limit -5\n\n\nCREATE TABLE t1 AS(\n  SELECT\n    rnd_geohash(20) location,\n    rnd_double() speed,\n    rnd_symbol(\u0027Jet\u0027, \u0027Rocket\u0027, \u0027Superman\u0027, \u0027Pigeon\u0027) type,\n    rnd_timestamp(to_timestamp(\u00272020\u0027, \u0027yyyy\u0027), to_timestamp(\u00272021\u0027, \u0027yyyy\u0027), 0) ts\n  FROM\n    long_sequence(10)\n), index(type) timestamp(ts) partition by MONTH;\n\nselect ts, type, 100 * (last(speed) - first(speed)) from t1 sample by 1M\n\nnumeric_column_value_1\nselect * from numeric_column_value_1 latest by device_id, column_name where device_id \u003d \u0027d1\u0027 and column_name in (\u0027c1\u0027, \u0027c2\u0027)\n\n\ncreate table numeric_column_value_1(\n    device_id symbol index,\n    column_name symbol index,\n    value double,\n    timestamp timestamp\n) timestamp(timestamp) partition by day;\n\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c1\u0027, 101.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c1\u0027, 101.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c1\u0027, 101.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c1\u0027, 101.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c2\u0027, 102.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c2\u0027, 102.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c2\u0027, 102.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c2\u0027, 102.4, \u00272021-10-05T14:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d1\u0027, \u0027c2\u0027, 102.5, \u00272021-10-05T15:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d2\u0027, \u0027c1\u0027, 201.1, \u00272021-10-05T11:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d2\u0027, \u0027c1\u0027, 201.2, \u00272021-10-05T12:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d2\u0027, \u0027c1\u0027, 201.3, \u00272021-10-05T13:31:35.878Z\u0027);\ninsert into numeric_column_value_1 (device_id, column_name, value, timestamp) values (\u0027d2\u0027, \u0027c1\u0027, 201.4, \u00272021-10-05T14:31:35.878Z\u0027);"
    }
  },
  {
    "name": "default_copy",
    "attrs": {
      "content": "drop table pollas\n\ncreate table pollas(\n                    cust_id SYMBOL index,\n                    balance_ccy SYMBOL,\n                    balance DOUBLE,\n                    timestamp TIMESTAMP\n                    )\n                    timestamp(timestamp)\n\ninsert into pollas values (\u0027c1\u0027, \u0027USD\u0027, 1500, \u00272021-09-14T17:35:01.000000Z\u0027);\ninsert into pollas values (\u0027c1\u0027, \u0027USD\u0027, 900.75, \u00272021-09-14T17:35:02.000000Z\u0027);\ninsert into pollas values (\u0027c1\u0027, \u0027EUR\u0027, 880.2, \u00272021-09-14T17:35:03.000000Z\u0027);\ninsert into pollas values (\u0027c1\u0027, \u0027EUR\u0027, 782, \u00272021-09-14T17:35:04.000000Z\u0027);\ninsert into pollas values (\u0027c2\u0027, \u0027USD\u0027, 900, \u00272021-09-14T17:35:05.000000Z\u0027);\ninsert into pollas values (\u0027c2\u0027, \u0027USD\u0027, 190.75, \u00272021-09-14T17:35:06.000000Z\u0027);\ninsert into pollas values (\u0027c2\u0027, \u0027EUR\u0027, 890.2, \u00272021-09-14T17:35:07.000000Z\u0027);\ninsert into pollas values (\u0027c2\u0027, \u0027EUR\u0027, 1000, \u00272021-09-14T17:35:08.000000Z\u0027);\n\nSELECT * FROM pollas LATEST BY cust_id, balance_ccy\nWHERE cust_id \u003d \u0027c1\u0027 and balance_ccy\u003d\u0027EUR\u0027"
    }
  },
  {
    "name": "finnhub",
    "attrs": {
      "content": "CREATE TABLE\n      quotes(stock_symbol SYMBOL CAPACITY 5 CACHE INDEX, -- we are in fact just checking 3\n             current_price DOUBLE,\n             high_price DOUBLE,\n             low_price DOUBLE,\n             open_price DOUBLE,\n             percent_change DOUBLE,\n             tradets TIMESTAMP, -- timestamp of the trade\n             ts TIMESTAMP)      -- time of insert in our table\n      timestamp(ts)\n  PARTITION BY DAY;\n\ndrop table quotes\nquotes\ntables\nINSERT INTO quotes(stock_symbol, current_price, high_price, low_price, open_price, percent_change, tradets, ts)\n    VALUES(\n        \u0027AAPL\u0027,\n        148.96,\n        149.7,\n        147.8,\n        148.985,\n        149.8,\n        1635796803000000,\n        1635859134555000\n    ) timestamp(ts)\n\n\nquotes where ts between \u00272021-11-01T12:00:01.048354Z\u0027 and \u00272021-11-02T12:00:01.048360Z\u0027\n\nselect count() from quotes\n\nquotes WHERE ts \u003e\u003d \u00272021-11-01T20:00:00.000000Z\u0027 AND ts \u003c\u003d \u00272021-11-01T21:00:00.000000Z\u0027\n\nselect current_price, ts from quotes where stock_symbol \u003d \u0027DOCN\u0027\n\nselect ts from quotes"
    }
  }
]